(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e4d8f9e"],{"0050":function(t,e,r){"use strict";var o=r("443f"),n=r.n(o);n.a},"057f":function(t,e,r){var o=r("fc6a"),n=r("241c").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return n(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?s(t):n(o(t))}},"159b":function(t,e,r){var o=r("da84"),n=r("fdbc"),i=r("17c2"),a=r("9112");for(var s in n){var c=o[s],l=c&&c.prototype;if(l&&l.forEach!==i)try{a(l,"forEach",i)}catch(f){l.forEach=i}}},"17c2":function(t,e,r){"use strict";var o=r("b727").forEach,n=r("a640"),i=r("ae40"),a=n("forEach"),s=i("forEach");t.exports=a&&s?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,e,r){"use strict";var o=r("6eeb"),n=r("825a"),i=r("d039"),a=r("ad6d"),s="toString",c=RegExp.prototype,l=c[s],f=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=s;(f||u)&&o(RegExp.prototype,s,(function(){var t=n(this),e=String(t.source),r=t.flags,o=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?a.call(t):r);return"/"+e+"/"+o}),{unsafe:!0})},"3ca3":function(t,e,r){"use strict";var o=r("6547").charAt,n=r("69f3"),i=r("7dd0"),a="String Iterator",s=n.set,c=n.getterFor(a);i(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=o(r,n),e.index+=t.length,{value:t,done:!1})}))},4160:function(t,e,r){"use strict";var o=r("23e7"),n=r("17c2");o({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"443f":function(t,e,r){},"4df4":function(t,e,r){"use strict";var o=r("0366"),n=r("7b0b"),i=r("9bdd"),a=r("e95a"),s=r("50c4"),c=r("8418"),l=r("35a1");t.exports=function(t){var e,r,f,u,d,h,m=n(t),g="function"==typeof this?this:Array,p=arguments.length,b=p>1?arguments[1]:void 0,v=void 0!==b,y=l(m),w=0;if(v&&(b=o(b,p>2?arguments[2]:void 0,2)),void 0==y||g==Array&&a(y))for(e=s(m.length),r=new g(e);e>w;w++)h=v?b(m[w],w):m[w],c(r,w,h);else for(u=y.call(m),d=u.next,r=new g;!(f=d.call(u)).done;w++)h=v?i(u,b,[f.value,w],!0):f.value,c(r,w,h);return r.length=w,r}},6547:function(t,e,r){var o=r("a691"),n=r("1d80"),i=function(t){return function(e,r){var i,a,s=String(n(e)),c=o(r),l=s.length;return c<0||c>=l?t?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):i:t?s.slice(c,c+2):a-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},6918:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"roles"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),r("el-breadcrumb-item",[t._v("权限管理")]),r("el-breadcrumb-item",[t._v("角色列表")])],1),r("el-card",{staticClass:"box-card"},[r("el-row",[r("el-col",{attrs:{span:3}},[r("el-button",{attrs:{type:"primary"},on:{click:t.addRole}},[t._v("添加角色")])],1)],1),r("el-table",{staticClass:"role-list-table",attrs:{data:t.roleList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.children,(function(o,n){return r("el-row",{class:["bottom-border","v-center",0===n?"top-border":""]},[r("el-col",{attrs:{span:6}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return t.tagClose1(e.row,o.id)}}},[t._v(t._s(o.authName))])],1),r("el-col",{attrs:{span:18}},t._l(o.children,(function(o,n){return r("el-row",{class:{"top-border":0!==n,"v-center":!0}},[r("el-col",{attrs:{span:8}},[r("el-tag",{attrs:{type:"success",closable:""},on:{close:function(r){return t.tagClose1(e.row,o.id)}}},[t._v(t._s(o.authName))])],1),r("el-col",{attrs:{span:16}},[r("el-row",t._l(o.children,(function(o,n){return r("el-tag",{attrs:{type:"warning",closable:""},on:{close:function(r){return t.tagClose1(e.row,o.id)}}},[t._v(t._s(o.authName))])})),1)],1)],1)})),1)],1)}))}}])}),r("el-table-column",{attrs:{type:"index"}}),r("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),r("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),r("el-table-column",{attrs:{label:"操作",width:"290px"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return t.editRole(e.row)}}},[t._v("编辑")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return t.removeRoleById(e.row.id)}}},[t._v("删除")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return t.setRight(e.row)}}},[t._v("分配权限")])]}}])})],1)],1),r("el-dialog",{attrs:{title:"编辑角色",visible:t.showEditForm,width:"50%"},on:{"update:visible":function(e){t.showEditForm=e}}},[r("el-form",{ref:"editRef",attrs:{model:t.editInfo,rules:t.editRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:t.editInfo.roleName,callback:function(e){t.$set(t.editInfo,"roleName",e)},expression:"editInfo.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:t.editInfo.roleDesc,callback:function(e){t.$set(t.editInfo,"roleDesc",e)},expression:"editInfo.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.showEditForm=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmEdit(t.editInfo)}}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"添加角色",visible:t.showAddForm,width:"50%"},on:{"update:visible":function(e){t.showAddForm=e},close:t.addFormClose}},[r("el-form",{ref:"addRef",attrs:{model:t.addInfo,rules:t.addRules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[r("el-input",{model:{value:t.addInfo.roleName,callback:function(e){t.$set(t.addInfo,"roleName",e)},expression:"addInfo.roleName"}})],1),r("el-form-item",{attrs:{label:"角色描述",prop:"roleDesc"}},[r("el-input",{model:{value:t.addInfo.roleDesc,callback:function(e){t.$set(t.addInfo,"roleDesc",e)},expression:"addInfo.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.showAddForm=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmAdd(t.addInfo)}}},[t._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配权限",visible:t.showSetForm,width:"50%"},on:{"update:visible":function(e){t.showSetForm=e},close:t.setFormClose}},[r("el-form",{ref:"setRef"},[r("el-tree",{ref:"setTreeRef",attrs:{data:t.setTreeData,"show-checkbox":"","node-key":"id",props:t.setTreeProps,"default-expand-all":"","default-checked-keys":t.originalRight}})],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.showSetForm=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.confirmSet}},[t._v("确 定")])],1)],1)],1)},n=[];r("99af"),r("4160"),r("a15b"),r("159b");function i(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0");function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){return i(t)||a(t)||s()}var l={data:function(){return{roleList:[],showEditForm:!1,editInfo:{id:0,roleName:"",roleDesc:""},editRules:{roleName:[{required:!0,message:"请输入角色描述",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},showAddForm:!1,addInfo:{roleName:"",roleDesc:""},addRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色描述",trigger:"blur"}]},showSetForm:!1,setTreeData:[],originalRight:[],setTreeProps:{label:"authName",children:"children"},selectedRight:[],setFormId:0}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var t=this;this.$http.get("roles").then((function(e){if(200!==e.data.meta.status)return t.$message.error("获取角色数据失败！");t.roleList=e.data.data}))},addRole:function(){this.showAddForm=!0},addFormClose:function(){this.$refs.addRef.resetFields()},confirmAdd:function(){var t=this;this.$refs.addRef.validate((function(e){e&&t.$http.post("roles",t.addInfo).then((function(e){if(201!==e.data.meta.status)return t.$message.error("添加角色失敗");t.showAddForm=!1,t.getRoleList(),t.$message.success("添加角色成功")}))}))},editRole:function(t){console.log(t),this.editInfo.id=t.id,this.editInfo.roleName=t.roleName,this.editInfo.roleDesc=t.roleDesc,this.showEditForm=!0},confirmEdit:function(t){var e=this;this.$refs.editRef.validate((function(t){t&&e.$http.put("roles/"+e.editInfo.id,{roleName:e.editInfo.roleName,roleDesc:e.editInfo.roleDesc}).then((function(t){if(200!==t.data.meta.status)return e.$message.error(t.data.meta.msg);e.showEditForm=!1,e.getRoleList(),e.$message.success("编辑角色成功！")})).catch((function(t){return t}))}))},removeRoleById:function(t){var e=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.delete("roles/"+t).then((function(t){if(console.log(t),200!==t.data.meta.status)return e.$message.error("删除失败");e.$message({type:"success",message:"删除成功!"}),e.getRoleList()})).catch((function(t){return t}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},setFormClose:function(){this.originalRight=[]},getRoleRight:function(t){var e=this;t.children?t.children.forEach((function(t,r){e.getRoleRight(t)})):this.originalRight.push(t.id)},setRight:function(t){var e=this;this.setFormId=t.id,this.getRoleRight(t),this.$http.get("rights/tree").then((function(t){if(200!==t.data.meta.status)return e.$message.error("获取权限列表失败");e.setTreeData=t.data.data})).catch((function(t){return t})),this.showSetForm=!0},confirmSet:function(){var t=this;this.selectedRight=[].concat(c(this.$refs.setTreeRef.getHalfCheckedKeys()),c(this.$refs.setTreeRef.getCheckedKeys())).join(","),this.$http.post("roles/".concat(this.setFormId,"/rights"),{rids:this.selectedRight}).then((function(e){if(200!==e.data.meta.status)return t.$message.error("分配权限失败");t.showSetForm=!1,t.getRoleList(),t.$message.success("设置权限成功"),t.originalRight=[]}))},tagClose1:function(t,e){var r=this;console.log(t,e),this.$confirm("此操作将永久删除该权限, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.$http.delete("roles/".concat(t.id,"/rights/").concat(e)).then((function(e){if(console.log(e),200!==e.data.meta.status)return r.$message.error("删除权限失败");t.children=e.data.data,r.$message({type:"success",message:"删除成功!"})})).catch((function(t){return t}))})).catch((function(){r.$message({type:"info",message:"已取消删除"})}))}}},f=l,u=(r("0050"),r("2877")),d=Object(u["a"])(f,o,n,!1,null,"3d6811bf",null);e["default"]=d.exports},"746f":function(t,e,r){var o=r("428f"),n=r("5135"),i=r("e538"),a=r("9bf2").f;t.exports=function(t){var e=o.Symbol||(o.Symbol={});n(e,t)||a(e,t,{value:i.f(t)})}},a15b:function(t,e,r){"use strict";var o=r("23e7"),n=r("44ad"),i=r("fc6a"),a=r("a640"),s=[].join,c=n!=Object,l=a("join",",");o({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(i(this),void 0===t?",":t)}})},a4d3:function(t,e,r){"use strict";var o=r("23e7"),n=r("da84"),i=r("d066"),a=r("c430"),s=r("83ab"),c=r("4930"),l=r("fdbf"),f=r("d039"),u=r("5135"),d=r("e8b5"),h=r("861d"),m=r("825a"),g=r("7b0b"),p=r("fc6a"),b=r("c04e"),v=r("5c6c"),y=r("7c73"),w=r("df75"),S=r("241c"),R=r("057f"),L=r("7418"),$=r("06cf"),x=r("9bf2"),I=r("d1e7"),k=r("9112"),F=r("6eeb"),N=r("5692"),A=r("f772"),E=r("d012"),T=r("90e3"),C=r("b622"),D=r("e538"),O=r("746f"),_=r("d44e"),j=r("69f3"),P=r("b727").forEach,M=A("hidden"),B="Symbol",V="prototype",G=C("toPrimitive"),q=j.set,H=j.getterFor(B),J=Object[V],z=n.Symbol,K=i("JSON","stringify"),Q=$.f,W=x.f,U=R.f,X=I.f,Y=N("symbols"),Z=N("op-symbols"),tt=N("string-to-symbol-registry"),et=N("symbol-to-string-registry"),rt=N("wks"),ot=n.QObject,nt=!ot||!ot[V]||!ot[V].findChild,it=s&&f((function(){return 7!=y(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,e,r){var o=Q(J,e);o&&delete J[e],W(t,e,r),o&&t!==J&&W(J,e,o)}:W,at=function(t,e){var r=Y[t]=y(z[V]);return q(r,{type:B,tag:t,description:e}),s||(r.description=e),r},st=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof z},ct=function(t,e,r){t===J&&ct(Z,e,r),m(t);var o=b(e,!0);return m(r),u(Y,o)?(r.enumerable?(u(t,M)&&t[M][o]&&(t[M][o]=!1),r=y(r,{enumerable:v(0,!1)})):(u(t,M)||W(t,M,v(1,{})),t[M][o]=!0),it(t,o,r)):W(t,o,r)},lt=function(t,e){m(t);var r=p(e),o=w(r).concat(mt(r));return P(o,(function(e){s&&!ut.call(r,e)||ct(t,e,r[e])})),t},ft=function(t,e){return void 0===e?y(t):lt(y(t),e)},ut=function(t){var e=b(t,!0),r=X.call(this,e);return!(this===J&&u(Y,e)&&!u(Z,e))&&(!(r||!u(this,e)||!u(Y,e)||u(this,M)&&this[M][e])||r)},dt=function(t,e){var r=p(t),o=b(e,!0);if(r!==J||!u(Y,o)||u(Z,o)){var n=Q(r,o);return!n||!u(Y,o)||u(r,M)&&r[M][o]||(n.enumerable=!0),n}},ht=function(t){var e=U(p(t)),r=[];return P(e,(function(t){u(Y,t)||u(E,t)||r.push(t)})),r},mt=function(t){var e=t===J,r=U(e?Z:p(t)),o=[];return P(r,(function(t){!u(Y,t)||e&&!u(J,t)||o.push(Y[t])})),o};if(c||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=T(t),r=function(t){this===J&&r.call(Z,t),u(this,M)&&u(this[M],e)&&(this[M][e]=!1),it(this,e,v(1,t))};return s&&nt&&it(J,e,{configurable:!0,set:r}),at(e,t)},F(z[V],"toString",(function(){return H(this).tag})),F(z,"withoutSetter",(function(t){return at(T(t),t)})),I.f=ut,x.f=ct,$.f=dt,S.f=R.f=ht,L.f=mt,D.f=function(t){return at(C(t),t)},s&&(W(z[V],"description",{configurable:!0,get:function(){return H(this).description}}),a||F(J,"propertyIsEnumerable",ut,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:z}),P(w(rt),(function(t){O(t)})),o({target:B,stat:!0,forced:!c},{for:function(t){var e=String(t);if(u(tt,e))return tt[e];var r=z(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(u(et,t))return et[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),o({target:"Object",stat:!0,forced:!c,sham:!s},{create:ft,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:dt}),o({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ht,getOwnPropertySymbols:mt}),o({target:"Object",stat:!0,forced:f((function(){L.f(1)}))},{getOwnPropertySymbols:function(t){return L.f(g(t))}}),K){var gt=!c||f((function(){var t=z();return"[null]"!=K([t])||"{}"!=K({a:t})||"{}"!=K(Object(t))}));o({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,r){var o,n=[t],i=1;while(arguments.length>i)n.push(arguments[i++]);if(o=e,(h(e)||void 0!==t)&&!st(t))return d(e)||(e=function(t,e){if("function"==typeof o&&(e=o.call(this,t,e)),!st(e))return e}),n[1]=e,K.apply(null,n)}})}z[V][G]||k(z[V],G,z[V].valueOf),_(z,B),E[M]=!0},a630:function(t,e,r){var o=r("23e7"),n=r("4df4"),i=r("1c7e"),a=!i((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:a},{from:n})},a640:function(t,e,r){"use strict";var o=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&o((function(){r.call(null,e||function(){throw 1},1)}))}},ad6d:function(t,e,r){"use strict";var o=r("825a");t.exports=function(){var t=o(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d28b:function(t,e,r){var o=r("746f");o("iterator")},ddb0:function(t,e,r){var o=r("da84"),n=r("fdbc"),i=r("e260"),a=r("9112"),s=r("b622"),c=s("iterator"),l=s("toStringTag"),f=i.values;for(var u in n){var d=o[u],h=d&&d.prototype;if(h){if(h[c]!==f)try{a(h,c,f)}catch(g){h[c]=f}if(h[l]||a(h,l,u),n[u])for(var m in i)if(h[m]!==i[m])try{a(h,m,i[m])}catch(g){h[m]=i[m]}}}},e01a:function(t,e,r){"use strict";var o=r("23e7"),n=r("83ab"),i=r("da84"),a=r("5135"),s=r("861d"),c=r("9bf2").f,l=r("e893"),f=i.Symbol;if(n&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var u={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new f(t):void 0===t?f():f(t);return""===t&&(u[e]=!0),e};l(d,f);var h=d.prototype=f.prototype;h.constructor=d;var m=h.toString,g="Symbol(test)"==String(f("test")),p=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=m.call(t);if(a(u,t))return"";var r=g?e.slice(7,-1):e.replace(p,"$1");return""===r?void 0:r}}),o({global:!0,forced:!0},{Symbol:d})}},e538:function(t,e,r){var o=r("b622");e.f=o},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-4e4d8f9e.eb169fcc.js.map