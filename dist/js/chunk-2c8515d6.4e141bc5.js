(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c8515d6"],{1276:function(t,e,a){"use strict";var n=a("d784"),r=a("44e7"),i=a("825a"),o=a("1d80"),c=a("4840"),s=a("8aa5"),l=a("50c4"),u=a("14c3"),d=a("9263"),f=a("d039"),h=[].push,p=Math.min,g=4294967295,m=!f((function(){return!RegExp(g,"y")}));n("split",2,(function(t,e,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var n=String(o(this)),i=void 0===a?g:a>>>0;if(0===i)return[];if(void 0===t)return[n];if(!r(t))return e.call(n,t,i);var c,s,l,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,f+"g");while(c=d.call(m,n)){if(s=m.lastIndex,s>p&&(u.push(n.slice(p,c.index)),c.length>1&&c.index<n.length&&h.apply(u,c.slice(1)),l=c[0].length,p=s,u.length>=i))break;m.lastIndex===c.index&&m.lastIndex++}return p===n.length?!l&&m.test("")||u.push(""):u.push(n.slice(p)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var r=o(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,r,a):n.call(String(r),e,a)},function(t,r){var o=a(n,t,this,r,n!==e);if(o.done)return o.value;var d=i(t),f=String(this),h=c(d,RegExp),v=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(m?"y":"g"),A=new h(m?d:"^(?:"+d.source+")",b),x=void 0===r?g:r>>>0;if(0===x)return[];if(0===f.length)return null===u(A,f)?[f]:[];var w=0,_=0,y=[];while(_<f.length){A.lastIndex=m?_:0;var E,T=u(A,m?f:f.slice(_));if(null===T||(E=p(l(A.lastIndex+(m?0:_)),f.length))===w)_=s(f,_,v);else{if(y.push(f.slice(w,_)),y.length===x)return y;for(var L=1;L<=T.length-1;L++)if(y.push(T[L]),y.length===x)return y;_=w=E}}return y.push(f.slice(w)),y}]}),!m)},"14c3":function(t,e,a){var n=a("c6b6"),r=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var i=a.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"159b":function(t,e,a){var n=a("da84"),r=a("fdbc"),i=a("17c2"),o=a("9112");for(var c in r){var s=n[c],l=s&&s.prototype;if(l&&l.forEach!==i)try{o(l,"forEach",i)}catch(u){l.forEach=i}}},"174e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"params"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("分类参数")])],1),a("el-card",{staticClass:"box-card"},[a("el-alert",{attrs:{title:"注意：只允许为第三级分类设置相关参数！",type:"warning","show-icon":""}}),a("el-row",{staticClass:"cat_opt"},[a("el-col",[a("span",[t._v("选择商品分类：")]),a("el-cascader",{staticStyle:{position:"relative"},attrs:{options:t.cateList,props:t.cateProps},on:{change:t.cateChange},model:{value:t.cateSelected,callback:function(e){t.cateSelected=e},expression:"cateSelected"}})],1)],1),a("el-tabs",{on:{"tab-click":t.tabChange},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}}),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}})],1),a("el-row",[a("el-col",{staticStyle:{"text-align":"left"}},[a("el-button",{attrs:{type:"primary",size:"small",disabled:0===t.cateSelected.length},on:{click:t.addAttr}},[t._v("添加"+t._s(t.addAttrBtnLabel))])],1)],1),a("el-table",{attrs:{data:t.attrList,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-row",{attrs:{clas:"add-new-tag"}},[t._l(e.row.attr_vals,(function(n,r){return a("el-tag",{attrs:{closable:""},on:{close:function(a){return t.attrTagClose(e.row,r)}}},[t._v(t._s(n))])})),e.row.showAddTagInput?a("el-input",{ref:"newInput",staticClass:"input-new-tag",attrs:{value:e.row.newTag,size:"small"},on:{change:function(a){return t.handleInputConfirm(e.row)}},model:{value:e.row.newTag,callback:function(a){t.$set(e.row,"newTag",a)},expression:"scope.row.newTag"}}):a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.addNewTag(e.row)}}},[t._v("+ New Tag")])],2)]}}])}),a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"many"==t.activeName?"参数名称":"属性名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editAttr(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.removeAttrById(e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"添加"+t.addAttrFormTitle,visible:t.showAddAttrForm,width:"50%"},on:{"update:visible":function(e){t.showAddAttrForm=e},close:t.addFormClose}},[a("el-form",{ref:"addAttrRef",attrs:{model:t.addAttrInfo,rules:t.addAttrRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:t.addAttrFormTitle,prop:"attr_name"}},[a("el-input",{model:{value:t.addAttrInfo.attr_name,callback:function(e){t.$set(t.addAttrInfo,"attr_name",e)},expression:"addAttrInfo.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showAddAttrForm=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmAdd(t.addAttrInfo)}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改"+t.addAttrFormTitle,visible:t.showeEditAttrForm,width:"50%"},on:{"update:visible":function(e){t.showeEditAttrForm=e}}},[a("el-form",{ref:"editAttrForm",attrs:{model:t.editAttrInfo,rules:t.addAttrRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:t.addAttrFormTitle,prop:"attr_name"}},[a("el-input",{model:{value:t.editAttrInfo.attr_name,callback:function(e){t.$set(t.editAttrInfo,"attr_name",e)},expression:"editAttrInfo.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showeEditAttrForm=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.confirmEdit(t.editAttrInfo)}}},[t._v("确 定")])],1)],1)],1)},r=[],i=(a("99af"),a("4160"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("159b"),{data:function(){return{cateSelected:[],cateList:[],cateProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},activeName:"many",attrList:[],showAddTagInput:!1,newTag:"",showAddAttrForm:!1,addAttrInfo:{attr_name:""},addAttrRules:{attr_name:[{required:!0,message:"请输入名称",trigger:"blur"}]},showeEditAttrForm:!1,editAttrInfo:{attr_name:""}}},created:function(){this.getCateList()},computed:{addAttrBtnLabel:function(){return"only"===this.activeName?"属性":"参数"},addAttrFormTitle:function(){return"only"===this.activeName?"静态属性":"动态参数"}},methods:{getCateList:function(){var t=this;this.$http.get("categories").then((function(e){if(200!==e.data.meta.status)return t.$message.error("获取分类列表失败");t.cateList=e.data.data}))},getAttrList:function(){var t=this;this.$http.get("categories/".concat(this.cateSelected[this.cateSelected.length-1],"/attributes"),{params:{sel:this.activeName}}).then((function(e){if(200!==e.data.meta.status)return t.$message.error("获取参数失败");e.data.data.forEach((function(t){t.attr_vals=(t.attr_vals||" ").split(" "),t.showAddTagInput=!1,t.newTag=""})),t.attrList=e.data.data})).catch((function(t){return t}))},cateChange:function(t){0!==t.length&&this.getAttrList()},tabChange:function(t){0!==this.cateSelected.length&&this.getAttrList()},attrTagClose:function(t,e){var a=this;this.$confirm("此操作将永久删除该属性值, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.attr_vals.splice(e,1),a.updateParams(t)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},addNewTag:function(t){var e=this;t.showAddTagInput=!0,this.$nextTick((function(t){e.$refs.newInput.focus()}))},handleInputConfirm:function(t){if(0===t.newTag.length)return t.showAddTagInput=!1;t.attr_vals.push(t.newTag),this.updateParams(t),this.$refs.newInput.clear(),t.showAddTagInput=!1},updateParams:function(t){var e=this;this.$http.put("categories/".concat(t.cat_id,"/attributes/").concat(t.attr_id),{attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(" ")}).then((function(t){if(200!==t.data.meta.status)return e.$message.error("更新".concat(e.addAttrBtnLabel,"失败"));e.$message.success("更新".concat(e.addAttrBtnLabel,"成功"))})).catch((function(t){return t}))},addAttr:function(){this.showAddAttrForm=!0},addFormClose:function(){this.$refs.addAttrRef.resetFields()},confirmAdd:function(t){var e=this;this.$refs.addAttrRef.validate((function(a){a&&e.$http.post("categories/".concat(e.cateSelected[e.cateSelected.length-1],"/attributes"),{attr_name:t.attr_name,attr_sel:e.activeName}).then((function(t){if(201!==t.data.meta.status)return e.$message.error("添加".concat(e.addAttrBtnLabel,"失败"));e.$message.success("添加".concat(e.addAttrBtnLabel,"成功")),e.showAddAttrForm=!1,e.getAttrList()})).catch((function(t){return t}))}))},removeAttrById:function(t){var e=this;this.$confirm("此操作将永久删除该".concat(this.addAttrBtnLabel,", 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$http.delete("categories/".concat(e.cateSelected[e.cateSelected.length-1],"/attributes/").concat(t)).then((function(t){if(200!==t.data.meta.status)return e.$message.error("删除".concat(e.addAttrBtnLabel,"失败"));e.$message.success("删除".concat(e.addAttrBtnLabel,"成功")),e.getAttrList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},editAttr:function(t){this.editAttrInfo.attr_name=t.attr_name,this.editAttrInfo.cat_id=t.cat_id,this.editAttrInfo.attr_id=t.attr_id,this.editAttrInfo.attr_sel=t.attr_sel,this.editAttrInfo.attr_vals=t.attr_vals,this.showeEditAttrForm=!0},confirmEdit:function(t){var e=this;this.$refs.editAttrForm.validate((function(a){a&&(e.updateParams(t),e.getAttrList(),e.showeEditAttrForm=!1)}))}}}),o=i,c=(a("a8c3"),a("2877")),s=Object(c["a"])(o,n,r,!1,null,"e26fbf44",null);e["default"]=s.exports},"17c2":function(t,e,a){"use strict";var n=a("b727").forEach,r=a("a640"),i=a("ae40"),o=r("forEach"),c=i("forEach");t.exports=o&&c?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,a){"use strict";var n=a("23e7"),r=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"44e7":function(t,e,a){var n=a("861d"),r=a("c6b6"),i=a("b622"),o=i("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},"5d8d":function(t,e,a){},6547:function(t,e,a){var n=a("a691"),r=a("1d80"),i=function(t){return function(e,a){var i,o,c=String(r(e)),s=n(a),l=c.length;return s<0||s>=l?t?"":void 0:(i=c.charCodeAt(s),i<55296||i>56319||s+1===l||(o=c.charCodeAt(s+1))<56320||o>57343?t?c.charAt(s):i:t?c.slice(s,s+2):o-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},"8aa5":function(t,e,a){"use strict";var n=a("6547").charAt;t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},9263:function(t,e,a){"use strict";var n=a("ad6d"),r=a("9f7f"),i=RegExp.prototype.exec,o=String.prototype.replace,c=i,s=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=s||u||l;d&&(c=function(t){var e,a,r,c,d=this,f=l&&d.sticky,h=n.call(d),p=d.source,g=0,m=t;return f&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),m=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,g++),a=new RegExp("^(?:"+p+")",h)),u&&(a=new RegExp("^"+p+"$(?!\\s)",h)),s&&(e=d.lastIndex),r=i.call(f?a:d,m),f?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:s&&r&&(d.lastIndex=d.global?r.index+r[0].length:e),u&&r&&r.length>1&&o.call(r[0],a,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(r[c]=void 0)})),r}),t.exports=c},"9f7f":function(t,e,a){"use strict";var n=a("d039");function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a15b:function(t,e,a){"use strict";var n=a("23e7"),r=a("44ad"),i=a("fc6a"),o=a("a640"),c=[].join,s=r!=Object,l=o("join",",");n({target:"Array",proto:!0,forced:s||!l},{join:function(t){return c.call(i(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var n=a("23e7"),r=a("23cb"),i=a("a691"),o=a("50c4"),c=a("7b0b"),s=a("65f0"),l=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!h},{splice:function(t,e){var a,n,u,d,f,h,b=c(this),A=o(b.length),x=r(t,A),w=arguments.length;if(0===w?a=n=0:1===w?(a=0,n=A-x):(a=w-2,n=g(p(i(e),0),A-x)),A+a-n>m)throw TypeError(v);for(u=s(b,n),d=0;d<n;d++)f=x+d,f in b&&l(u,d,b[f]);if(u.length=n,a<n){for(d=x;d<A-n;d++)f=d+n,h=d+a,f in b?b[h]=b[f]:delete b[h];for(d=A;d>A-n+a;d--)delete b[d-1]}else if(a>n)for(d=A-n;d>x;d--)f=d+n-1,h=d+a-1,f in b?b[h]=b[f]:delete b[h];for(d=0;d<a;d++)b[d+x]=arguments[d+2];return b.length=A-n+a,u}})},a640:function(t,e,a){"use strict";var n=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&n((function(){a.call(null,e||function(){throw 1},1)}))}},a8c3:function(t,e,a){"use strict";var n=a("5d8d"),r=a.n(n);r.a},ac1f:function(t,e,a){"use strict";var n=a("23e7"),r=a("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(t,e,a){"use strict";var n=a("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d784:function(t,e,a){"use strict";a("ac1f");var n=a("6eeb"),r=a("d039"),i=a("b622"),o=a("9263"),c=a("9112"),s=i("species"),l=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),h=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,d){var p=i(t),g=!r((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),m=g&&!r((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[s]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return e=!0,null},a[p](""),!e}));if(!g||!m||"replace"===t&&(!l||!u||f)||"split"===t&&!h){var v=/./[p],b=a(p,""[t],(function(t,e,a,n,r){return e.exec===o?g&&!r?{done:!0,value:v.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),A=b[0],x=b[1];n(String.prototype,t,A),n(RegExp.prototype,p,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}d&&c(RegExp.prototype[p],"sham",!0)}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-2c8515d6.4e141bc5.js.map