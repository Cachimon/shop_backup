{"version":3,"sources":["webpack:///./src/views/goods/Categories.vue?8285","webpack:///./src/views/goods/Categories.vue?5f89","webpack:///src/views/goods/Categories.vue","webpack:///./src/views/goods/Categories.vue?8e3f","webpack:///./src/views/goods/Categories.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","path","_v","staticStyle","on","addCate","directives","name","rawName","value","expression","ref","treeData","treeColumns","scopedSlots","_u","key","fn","scope","row","cat_deleted","cat_level","_e","$event","editCate","removeCateById","cat_id","currentPage","queryInfo","pagesize","total","handleSizeChange","handleCurrentChange","showAddForm","addFormClose","addInfo","addRules","model","callback","$$v","$set","cateList","cateProps","cateChange","cateSelected","slot","confirmAdd","showEditForm","editInfo","confirmEdit","staticRenderFns","data","type","pagenum","cat_name","checkStrictly","expandTrigger","label","children","loading","created","getCateList","methods","$http","val","$nextTick","cate","$refs","editRef","validate","valid","$confirm","confirmButtonText","cancelButtonText","get","res","meta","status","addRef","resetFields","console","log","component"],"mappings":"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","file":"js/chunk-e3eb8f94.148029a1.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=style&index=0&id=0bd93c54&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=style&index=0&id=0bd93c54&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"categories\"},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"商品管理\")]),_c('el-breadcrumb-item',[_vm._v(\"商品分类\")])],1),_c('el-card',{staticClass:\"box-card\"},[_c('el-row',[_c('el-col',{staticStyle:{\"text-align\":\"left\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addCate}},[_vm._v(\"添加分类\")])],1)],1),_c('tree-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"treeTable\",staticClass:\"tree-table\",attrs:{\"data\":_vm.treeData,\"columns\":_vm.treeColumns,\"border\":\"\",\"show-index\":\"\",\"index-text\":\"#\",\"selection-type\":false,\"expand-type\":false,\"element-loading-text\":\"加载中\",\"element-loading-spinner\":\"el-icon-loading\"},scopedSlots:_vm._u([{key:\"ifValid\",fn:function(scope){return [(!scope.row.cat_deleted)?_c('i',{staticClass:\"el-icon-success\",staticStyle:{\"color\":\"lightgreen\"}}):_c('i',{staticClass:\"el-icon-error\",staticStyle:{\"color\":\"red\"}})]}},{key:\"rank\",fn:function(scope){return [(scope.row.cat_level === 0)?_c('el-tag',[_vm._v(\"一级\")]):_vm._e(),(scope.row.cat_level === 1)?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"二级\")]):_vm._e(),(scope.row.cat_level === 2)?_c('el-tag',{attrs:{\"type\":\"warning\"}},[_vm._v(\"三级\")]):_vm._e()]}},{key:\"operation\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.editCate(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.removeCateById(scope.row.cat_id)}}},[_vm._v(\"删除\")])]}}])}),_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.queryInfo.pagesize,\"page-sizes\":[5, 8, 12, 15],\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加分类\",\"visible\":_vm.showAddForm,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.showAddForm=$event},\"close\":_vm.addFormClose}},[_c('el-form',{ref:\"addRef\",attrs:{\"model\":_vm.addInfo,\"rules\":_vm.addRules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称：\",\"prop\":\"cat_name\"}},[_c('el-input',{model:{value:(_vm.addInfo.cat_name),callback:function ($$v) {_vm.$set(_vm.addInfo, \"cat_name\", $$v)},expression:\"addInfo.cat_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"父级分类：\"}},[_c('el-cascader',{staticStyle:{\"position\":\"relative\"},attrs:{\"options\":_vm.cateList,\"props\":_vm.cateProps,\"clearable\":\"\"},on:{\"change\":_vm.cateChange},model:{value:(_vm.cateSelected),callback:function ($$v) {_vm.cateSelected=$$v},expression:\"cateSelected\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showAddForm = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.confirmAdd(_vm.addInfo)}}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改分类\",\"visible\":_vm.showEditForm,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.showEditForm=$event}}},[_c('el-form',{ref:\"editRef\",attrs:{\"model\":_vm.editInfo,\"rules\":_vm.addRules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\",\"prop\":\"cat_name\"}},[_c('el-input',{model:{value:(_vm.editInfo.cat_name),callback:function ($$v) {_vm.$set(_vm.editInfo, \"cat_name\", $$v)},expression:\"editInfo.cat_name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showEditForm = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.confirmEdit(_vm.editInfo)}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"categories\">\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品分类</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card class=\"box-card\">\r\n      <el-row>\r\n        <el-col style=\"text-align: left\">\r\n          <el-button type=\"primary\" @click=\"addCate\">添加分类</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <tree-table\r\n        :data=\"treeData\"\r\n        :columns=\"treeColumns\"\r\n        border\r\n        show-index\r\n        index-text=\"#\"\r\n        :selection-type=\"false\"\r\n        :expand-type=\"false\"\r\n        class=\"tree-table\"\r\n        ref=\"treeTable\"\r\n        v-loading=\"loading\"\r\n        element-loading-text=\"加载中\"\r\n        element-loading-spinner=\"el-icon-loading\"\r\n      >\r\n        <template v-slot:ifValid=\"scope\">\r\n          <i class=\"el-icon-success\" style=\"color: lightgreen\" v-if=\"!scope.row.cat_deleted\"></i>\r\n          <i class=\"el-icon-error\" style=\"color: red\" v-else></i>\r\n        </template>\r\n        <template v-slot:rank=\"scope\">\r\n          <el-tag v-if=\"scope.row.cat_level === 0\">一级</el-tag>\r\n          <el-tag v-if=\"scope.row.cat_level === 1\" type=\"success\">二级</el-tag>\r\n          <el-tag v-if=\"scope.row.cat_level === 2\" type=\"warning\">三级</el-tag>\r\n        </template>\r\n        <template v-slot:operation=\"scope\">\r\n          <!-- 修改按钮 -->\r\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"editCate(scope.row)\">编辑</el-button>\r\n          <!-- 删除按钮 -->\r\n          <el-button\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            size=\"mini\"\r\n            @click=\"removeCateById(scope.row.cat_id)\"\r\n          >删除</el-button>\r\n        </template>\r\n      </tree-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"currentPage\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        :page-sizes=\"[5, 8, 12, 15]\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      ></el-pagination>\r\n    </el-card>\r\n    <el-dialog title=\"添加分类\" :visible.sync=\"showAddForm\" width=\"50%\" @close=\"addFormClose\">\r\n      <el-form :model=\"addInfo\" :rules=\"addRules\" label-width=\"100px\" ref=\"addRef\">\r\n        <!--是rules不是rule-->\r\n        <el-form-item label=\"分类名称：\" prop=\"cat_name\">\r\n          <el-input v-model=\"addInfo.cat_name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"父级分类：\">\r\n          <el-cascader\r\n            style=\"position: relative\"\r\n            :options=\"cateList\"\r\n            :props=\"cateProps\"\r\n            v-model=\"cateSelected\"\r\n            @change=\"cateChange\"\r\n            clearable\r\n          ></el-cascader>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"showAddForm = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmAdd(addInfo)\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <el-dialog title=\"修改分类\" :visible.sync=\"showEditForm\" width=\"50%\">\r\n      <el-form :model=\"editInfo\" :rules=\"addRules\" label-width=\"80px\" ref=\"editRef\">\r\n        <!--是rules不是rule-->\r\n        <el-form-item label=\"分类名称\" prop=\"cat_name\">\r\n          <el-input v-model=\"editInfo.cat_name\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"showEditForm = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmEdit(editInfo)\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      queryInfo: {\r\n        type: 3,\r\n        pagenum: 1,\r\n        pagesize: 5\r\n      },\r\n      total: 0,\r\n      currentPage: 1,\r\n      treeData: [],\r\n      treeColumns: [\r\n        {\r\n          label: \"分类名称\",\r\n          prop: \"cat_name\"\r\n        },\r\n        {\r\n          label: \"是否有效\",\r\n          prop: \"cat_deleted\",\r\n          type: \"template\",\r\n          template: \"ifValid\"\r\n        },\r\n        {\r\n          label: \"排序\",\r\n          prop: \"cat_level\",\r\n          type: \"template\",\r\n          template: \"rank\"\r\n        },\r\n        {\r\n          label: \"操作\",\r\n          type: \"template\",\r\n          template: \"operation\"\r\n        }\r\n      ],\r\n      showAddForm: false,\r\n      addInfo: {\r\n        cat_name: \"\"\r\n      },\r\n      addRules: {\r\n        cat_name: [\r\n          { required: true, message: \"请输入分类名称\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      cateSelected: [],\r\n      cateList: [],\r\n      cateProps: {\r\n        checkStrictly: true,\r\n        expandTrigger: \"hover\",\r\n        value: \"cat_id\",\r\n        label: \"cat_name\",\r\n        children: \"children\"\r\n      },\r\n      showEditForm: false,\r\n      editInfo: {\r\n        cat_id: 0,\r\n        cat_name: \"\"\r\n      },\r\n      loading: true\r\n    };\r\n  },\r\n  created() {\r\n    this.getCateList();\r\n  },\r\n  methods: {\r\n    getCateList() {\r\n      /*let loadingInstance = this.$loading({\r\n        target: this.$refs.treeTable,\r\n        fullscreen: false,\r\n        lock: true\r\n      });*/\r\n      this.$http\r\n        .get(\"categories\", { params: this.queryInfo })\r\n        .then(res => {\r\n          if (res.data.meta.status !== 200)\r\n            return this.$message.error(\"获取商品分类失败\");\r\n          this.treeData = res.data.data.result;\r\n          this.total = res.data.data.total;\r\n          this.$nextTick(() => {\r\n            // 以服务的方式调用的 Loading 需要异步关闭\r\n            this.loading = false;\r\n          });\r\n        })\r\n        .catch(err => err);\r\n    },\r\n    handleSizeChange(val) {\r\n      this.queryInfo.pagesize = val;\r\n      this.loading = true;\r\n      this.getCateList();\r\n\r\n      this.$nextTick(() => {\r\n        // 以服务的方式调用的 Loading 需要异步关闭\r\n        this.loading = false;\r\n      });\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.loading = true;\r\n      this.queryInfo.pagenum = val;\r\n      this.getCateList();\r\n      this.$nextTick(() => {\r\n        // 以服务的方式调用的 Loading 需要异步关闭\r\n        this.loading = false;\r\n      });\r\n    },\r\n    editCate(cate) {\r\n      this.editInfo.cat_name = cate.cat_name;\r\n      this.editInfo.cat_id = cate.cat_id;\r\n      this.showEditForm = true;\r\n    },\r\n    confirmEdit(editInfo) {\r\n      this.$refs.editRef.validate(valid => {\r\n        if (!valid) return;\r\n        this.$http\r\n          .put(`categories/${editInfo.cat_id}`, {\r\n            cat_name: editInfo.cat_name\r\n          })\r\n          .then(res => {\r\n            if (res.data.meta.status !== 200)\r\n              return this.$message.error(\"修改参数失败\");\r\n            this.showEditForm = false;\r\n            this.getCateList();\r\n            this.$message.success(\"修改参数成功\");\r\n          })\r\n          .catch(err => err);\r\n      });\r\n    },\r\n    removeCateById(cateId) {\r\n      this.$confirm(\"此操作将永久删除该分类, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\"\r\n      })\r\n        .then(() => {\r\n          this.$http\r\n            .delete(`categories/${cateId}`)\r\n            .then(res => {\r\n              if (res.data.meta.status !== 200)\r\n                return this.$message.error(\"删除失败\");\r\n              this.$message({\r\n                type: \"success\",\r\n                message: \"删除成功!\"\r\n              });\r\n              this.getCateList();\r\n            })\r\n            .catch(err => {\r\n              return err;\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\"\r\n          });\r\n        });\r\n    },\r\n    addCate() {\r\n      this.$http.get(\"categories\", { params: { type: 2 } }).then(res => {\r\n        if (res.data.meta.status !== 200)\r\n          return this.$message.error(\"获取分类列表失败\");\r\n        this.cateList = res.data.data;\r\n      });\r\n      this.showAddForm = true;\r\n    },\r\n    addFormClose() {\r\n      this.$refs.addRef.resetFields();\r\n      this.cateSelected = [];\r\n    },\r\n    confirmAdd(addInfo) {\r\n      this.$refs.addRef.validate(valid => {\r\n        if (!valid) return;\r\n        this.$http\r\n          .post(\"categories\", {\r\n            cat_pid:\r\n              this.cateSelected.length === 0\r\n                ? 0\r\n                : this.cateSelected[this.cateSelected.length - 1],\r\n            cat_name: this.addInfo.cat_name,\r\n            cat_level: this.cateSelected.length\r\n          })\r\n          .then(res => {\r\n            console.log(res);\r\n            if (res.data.meta.status !== 201)\r\n              this.$message.error(\"添加分类失败\");\r\n            this.$message.success(\"添加分类成功\");\r\n            this.showAddForm = false;\r\n            this.getCateList();\r\n          });\r\n      });\r\n    },\r\n    cateChange(val) {\r\n      console.log(val);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.tree-table {\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Categories.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Categories.vue?vue&type=template&id=0bd93c54&scoped=true&\"\nimport script from \"./Categories.vue?vue&type=script&lang=js&\"\nexport * from \"./Categories.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Categories.vue?vue&type=style&index=0&id=0bd93c54&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bd93c54\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}